{"bean": {
   "nonvisualchildren": "",
   "controller": {
      "dependency": {
         "internal": [],
         "custom": []
      },
      "scss": "",
      "function": [
         {
            "argument": ["arr"],
            "name": "duration",
            "id": "43C3B29A-9A60-F226-6D7D-49888F92295B",
            "body": "function toMin(duration:string):number {\n    if (duration == null || !duration.includes(\":\")) {\n        console.debug(\"toMin: duraction not like hh:mm\", duration);\n        return 0\n    }\n    const d = duration.split(\":\");\n    return parseInt(d[0])*60 + parseInt(d[1])\n}\n\nfunction toDuration(min:number):string {\n    return String(Math.floor(min/60)) + \":\" + String(min%60).padStart(2,'0') \n}\n\n\nconst minutes = arr.reduce((acc, value) => acc + toMin(value.duration), 0);\nreturn toDuration(minutes)",
            "type": "method"
         },
         {
            "argument": ["key"],
            "name": "renameWing",
            "id": "28B04299-8658-1833-EC3D-917B01B90A1A",
            "body": "console.group(\"renameSite: \", key);\nconst _that = this;\nconst alert = await this.Apperyio.getController(\"AlertController\").create({\n    header: `Rename Wing`,\n    message: `Enter the new wing name and confirm that you want to rename all your flights on ${key}`,\n    inputs: [{\n        name: 'newWingName',\n        type: 'text',\n        placeholder: 'New wing name',\n        value: key\n    }],\n    buttons: [{\n        text: 'Cancel',\n        role: 'cancel',\n        cssClass: 'secondary',\n    }, {\n        text: 'Rename wing?',\n        handler: async (res) => {\n            const newWingName = res.newWingName;\n            console.time('Load LogStorage');\n            //let logTable = await this.Apperyio.data.getStorage(\"LogStorage\");\n            let logTable = await this.Apperyio.data.getVariable(\"LogStorage\");\n            console.timeEnd('Load LogStorage');\n            logTable = logTable.map(({wing: wing, ...rest}) =>  ({wing: wing == key ? newWingName : wing, ...rest}));\n            _that.wings = _that.groupArrayOfObjects(logTable, \"wing\"); //force cards to refresh?\n            console.time('Save LogStorage');\n            await this.Apperyio.data.setStorage(\"LogStorage\", logTable);\n            await this.Apperyio.data.setVariable(\"LogStorage\", logTable);\n            console.timeEnd('Save LogStorage');\n        }\n    }]\n});\nawait alert.present();\nconsole.groupEnd();",
            "type": "async_method"
         },
         {
            "argument": [
               "list",
               "key"
            ],
            "name": "groupArrayOfObjects",
            "id": "CA706C7D-8B65-87BC-5DCB-C64B260AC110",
            "body": "//https://www.codegrepper.com/code-examples/javascript/typescript+group+by+array\nreturn list.reduce(function(rv, x) {\n    (rv[x[key]] = rv[x[key]] || []).push(x);\n    return rv;\n    }, \n{});",
            "type": "method"
         }
      ],
      "module": {},
      "variable": [{
         "addDI": false,
         "name": "wings",
         "id": "48179083-B6EF-9C9B-DA6E-AB709F7CDA7F",
         "type": "ADB7DD8B-612F-6E85-DA32-0D74E1330AA3",
         "value": ""
      }]
   },
   "children": {"bean": [
      {
         "children": {"bean": [{
            "children": {"bean": [{
               "children": {"bean": [
                  {
                     "children": {"bean": []},
                     "@type": "Ionic5CardItemTitleBean",
                     "property": {
                        "mode": "",
                        "advancedProperties": {"Href": ""},
                        "color": "primary",
                        "className": "",
                        "wrapper": "ion-card-title",
                        "text": "{{item.key}}",
                        "componentName": "Title",
                        "aio_visible": "true"
                     },
                     "@id": "0793768D-14F8-49C4-88D1-807ED37FBA34",
                     "events": ""
                  },
                  {
                     "children": {"bean": []},
                     "@type": "Ionic5CardItemTitleBean",
                     "property": {
                        "mode": "",
                        "color": "medium",
                        "className": "",
                        "wrapper": "ion-card-subtitle",
                        "text": "{{item.value.length}} flights totaling {{duration(item.value)}}",
                        "componentName": "SubTitle",
                        "aio_visible": "true"
                     },
                     "@id": "7D907F10-111A-46C8-85EF-9BF4212853A4",
                     "events": ""
                  },
                  {
                     "children": {"bean": []},
                     "@type": "Ionic5ButtonBean",
                     "property": {
                        "ion4Routing": {
                           "route": "",
                           "routerDirection": "",
                           "params": ""
                        },
                        "strong": "false",
                        "color": "medium",
                        "shape": "",
                        "icon": {
                           "style": "create-outline",
                           "name": "",
                           "color": "medium",
                           "className": "",
                           "slot": "icon-only",
                           "customIcon": "-1"
                        },
                        "className": "",
                        "slot": "",
                        "fill": "",
                        "aio_visible": "true",
                        "mode": "",
                        "advancedProperties": {"(click)": "renameWing(item.key)"},
                        "expand": "",
                        "component": "ion-button",
                        "buttonType": "bar-button",
                        "size": "small",
                        "ionMenuButton": {
                           "icon": "__default",
                           "autoHide": "",
                           "menu": "",
                           "customIcon": "-1",
                           "type": ""
                        },
                        "linkFeatures": {
                           "rel": "",
                           "href": "",
                           "type": "",
                           "target": ""
                        },
                        "disabled": "",
                        "text": "Rename",
                        "componentName": "EditButton",
                        "ionBackButton": {
                           "defaultHref": "",
                           "icon": "__default",
                           "text": "",
                           "customIcon": "-1",
                           "type": ""
                        },
                        "styleBorderColor": "",
                        "styleBorderRadius": {
                           "all": "",
                           "topLeft": "",
                           "topRight": "",
                           "bottomLeft": "",
                           "bottomRight": ""
                        },
                        "styleBorderStyle": "",
                        "styleBorderWidth": {
                           "all": "",
                           "top": "",
                           "right": "",
                           "bottom": "",
                           "left": ""
                        },
                        "styleColor": "",
                        "styleMargin": {
                           "all": "",
                           "top": "",
                           "right": "",
                           "bottom": "",
                           "left": ""
                        },
                        "visible": "true"
                     },
                     "@id": "48D7449C-C21E-47E1-89E9-FBC448E7022C",
                     "events": ""
                  }
               ]},
               "@type": "Ionic5CardItemBean",
               "property": {
                  "mode": "",
                  "translucent": "false",
                  "color": "",
                  "className": "",
                  "wrapper": "ion-card-content",
                  "text": "Item text",
                  "componentName": "CardItem1",
                  "aio_visible": "true",
                  "visible": "true"
               },
               "@id": "FACDDEF4-9B5C-47B6-8DDF-044E1ED6C597",
               "events": ""
            }]},
            "@type": "Ionic5CardBean",
            "property": {
               "mode": "",
               "ion4Routing": {
                  "route": "",
                  "routerDirection": "",
                  "params": ""
               },
               "advancedProperties": {"*ngFor": "let item of wings | keyvalue"},
               "isButton": "false",
               "color": "",
               "linkFeatures": {
                  "rel": "",
                  "href": "",
                  "type": "",
                  "target": ""
               },
               "className": "ion-no-margin",
               "disabled": "",
               "slot": "",
               "componentName": "Wings",
               "aio_visible": "true",
               "visible": "true"
            },
            "@id": "C58B5D8D-CA3D-45DF-BD48-FFABECC574EF",
            "events": ""
         }]},
         "@type": "Ionic5ContentBean",
         "property": {
            "advancedProperties": {"(ionScroll)": ""},
            "color": "",
            "fullscreen": "false",
            "forceOverscroll": "",
            "scrollY": "",
            "className": "ion-no-margin",
            "availableSlots": {
               "": "Not selected",
               "fixed": "Fixed"
            },
            "componentName": "Content1",
            "scrollEvents": "",
            "scrollX": "",
            "stylePadding": {
               "all": "",
               "top": "",
               "right": "",
               "bottom": "",
               "left": ""
            },
            "styleTextAlign": "",
            "": ""
         },
         "@id": "8D89459E-5468-4126-B6A9-AD1773A8D9AB",
         "events": ""
      },
      {
         "children": {"bean": [{
            "children": {"bean": [
               {
                  "children": {"bean": [
                     {
                        "children": {"bean": []},
                        "@type": "Ionic5ButtonBean",
                        "property": {
                           "ion4Routing": {
                              "route": "",
                              "routerDirection": "",
                              "params": ""
                           },
                           "strong": "false",
                           "color": "",
                           "shape": "",
                           "icon": {
                              "color": "",
                              "name": "",
                              "style": "none",
                              "className": "",
                              "slot": "",
                              "customIcon": "-1"
                           },
                           "className": "",
                           "slot": "",
                           "fill": "",
                           "aio_visible": "false",
                           "mode": "",
                           "advancedProperties": {"(click)": ""},
                           "expand": "block",
                           "component": "ion-menu-button",
                           "buttonType": "",
                           "size": "",
                           "ionMenuButton": {
                              "icon": "__default",
                              "autoHide": "",
                              "menu": "",
                              "customIcon": "-1",
                              "type": ""
                           },
                           "linkFeatures": {
                              "rel": "",
                              "href": "",
                              "type": "",
                              "target": ""
                           },
                           "disabled": "",
                           "text": "Button",
                           "componentName": "MenuButton",
                           "ionBackButton": {
                              "defaultHref": "",
                              "icon": "__default",
                              "text": "",
                              "customIcon": "-1",
                              "type": ""
                           },
                           "styleBorderColor": "",
                           "styleBorderRadius": {
                              "all": "",
                              "topLeft": "",
                              "topRight": "",
                              "bottomLeft": "",
                              "bottomRight": ""
                           },
                           "styleBorderStyle": "",
                           "styleBorderWidth": {
                              "all": "",
                              "top": "",
                              "right": "",
                              "bottom": "",
                              "left": ""
                           },
                           "styleColor": "",
                           "styleMargin": {
                              "all": "",
                              "top": "",
                              "right": "",
                              "bottom": "",
                              "left": ""
                           },
                           "visible": "true"
                        },
                        "@id": "9B437004-DB12-63F1-28B9-E0BE1BE5B2E9",
                        "events": ""
                     },
                     {
                        "children": {"bean": []},
                        "@type": "Ionic5ButtonBean",
                        "property": {
                           "ion4Routing": {
                              "route": "",
                              "routerDirection": "",
                              "params": ""
                           },
                           "strong": "false",
                           "color": "",
                           "shape": "",
                           "icon": {
                              "color": "",
                              "name": "",
                              "style": "none",
                              "className": "",
                              "slot": "",
                              "customIcon": "-1"
                           },
                           "className": "",
                           "slot": "",
                           "fill": "",
                           "aio_visible": "true",
                           "mode": "",
                           "advancedProperties": {"(click)": ""},
                           "expand": "block",
                           "component": "ion-back-button",
                           "buttonType": "",
                           "size": "",
                           "ionMenuButton": {
                              "icon": "__default",
                              "autoHide": "",
                              "menu": "",
                              "customIcon": "-1",
                              "type": ""
                           },
                           "linkFeatures": {
                              "rel": "",
                              "href": "",
                              "type": "",
                              "target": ""
                           },
                           "disabled": "",
                           "text": "Button",
                           "componentName": "BackButton",
                           "ionBackButton": {
                              "defaultHref": "",
                              "icon": "__default",
                              "text": "",
                              "customIcon": "-1",
                              "type": ""
                           },
                           "styleBorderColor": "",
                           "styleBorderRadius": {
                              "all": "",
                              "topLeft": "",
                              "topRight": "",
                              "bottomLeft": "",
                              "bottomRight": ""
                           },
                           "styleBorderStyle": "",
                           "styleBorderWidth": {
                              "all": "",
                              "top": "",
                              "right": "",
                              "bottom": "",
                              "left": ""
                           },
                           "styleColor": "",
                           "styleMargin": {
                              "all": "",
                              "top": "",
                              "right": "",
                              "bottom": "",
                              "left": ""
                           },
                           "visible": "true"
                        },
                        "@id": "88D0F68E-83BC-4E0A-83C7-0484F30BC934",
                        "events": ""
                     }
                  ]},
                  "@type": "Ionic5ToolbarButtonsBean",
                  "property": {
                     "className": "",
                     "slot": "start",
                     "componentName": "ToolbarButtons1",
                     "aio_visible": "true",
                     "collapse": "true"
                  },
                  "@id": "7147DE72-A520-47BD-924B-C46C43714698",
                  "events": ""
               },
               {
                  "children": {"bean": []},
                  "@type": "Ionic5ToolbarTitleBean",
                  "property": {
                     "color": "primary",
                     "className": "",
                     "text": "Wings",
                     "componentName": "ToolbarTitle1",
                     "aio_visible": "true",
                     "size": ""
                  },
                  "@id": "C49A3780-7CE0-4CC6-9012-B58CCE0A89CC",
                  "events": ""
               }
            ]},
            "@type": "Ionic5ToolbarBean",
            "property": {
               "mode": "",
               "isTitle": "true",
               "color": "",
               "className": "",
               "availableSlots": {
                  "": "Not selected",
                  "secondary": "Secondary",
                  "start": "Start",
                  "end": "End",
                  "primary": "Primary"
               },
               "slot": "",
               "componentName": "Toolbar1",
               "aio_visible": "true",
               "visible": "true"
            },
            "@id": "919B5B6C-719F-412E-9A3F-E93AA4B3B5D0",
            "events": ""
         }]},
         "@type": "Ionic5HeaderBean",
         "property": {
            "mode": "",
            "translucent": "false",
            "className": "",
            "noBorder": "false",
            "componentName": "Header1",
            "aio_visible": "true"
         },
         "@id": "574CF641-9AB8-47B3-9288-AE2D5FB6DEC9",
         "events": ""
      }
   ]},
   "@type": "MobileScreenBean",
   "property": {
      "isTabs": "false",
      "platformMode": "md",
      "showHeader": "true",
      "theme": "",
      "componentName": "Page",
      "showFooter": "false",
      "isModal": "false"
   },
   "@id": "29BEBF93-61F2-4A8D-A513-21F004F85647",
   "events": {"ionViewWillEnter": {
      "@id": "Ionic5Event9730",
      "@readOnly": "false",
      "actions": {"customjs": {
         "@readOnly": false,
         "@index": 0,
         "@id": "CustomJSAction98498",
         "isActive": true,
         "script": "console.group(\"Before page showing - Wings\");\nconsole.time('Loading LogStorage');\n//const logTable = await this.Apperyio.data.getStorage(\"LogStorage\");\nconst logTable = await this.Apperyio.data.getVariable(\"LogStorage\");\nconsole.timeEnd('Loading LogStorage');\n\nthis.wings = this.groupArrayOfObjects(logTable, \"wing\");\nconsole.groupEnd()"
      }}
   }}
}}